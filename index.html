<!DOCTYPE html><!DOCTYPE html>
<html>
<head>
  <title>Starscape Ore Calculator with Quantities</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    textarea { width: 100%; height: 150px; margin-bottom: 10px; font-family: monospace; }
    button { padding: 10px 20px; font-size: 16px; }
    h3 { margin-top: 20px; }
    pre { background: #f0f0f0; padding: 10px; }
  </style>
</head>
<body>

  <h2>Starscape Ore Calculator (with quantities)</h2>
  <p>Enter one line per ore (e.g., <code>korrelite P 12</code> or <code>gellium N</code>):</p>

  <textarea id="oreInput" placeholder="korrelite P 12&#10;gellium N 5&#10;axnit S&#10;reknite I 3"></textarea>
  <button onclick="calculate()">Calculate</button>

  <h3>Results:</h3>
  <pre id="results"></pre>

  <script>
    const tierValues = {
      I: 1,
      N: 2,
      S: 3,
      P: 4
    };

    function calculate() {
      const input = document.getElementById("oreInput").value.trim();
      const lines = input.split("\n");
      const oreTotals = {};
      let grandTotal = 0;
      let output = "";

      lines.forEach(line => {
        const parts = line.trim().split(/\s+/);
        if (parts.length < 2) return; // need at least ore + tier

        const ore = parts[0].toLowerCase();
        const tier = parts[1].toUpperCase();
        let quantity = 1;

        if (!tierValues[tier]) return; // invalid tier

        if (parts.length >= 3) {
          const q = parseInt(parts[2]);
          if (!isNaN(q) && q > 0) quantity = q;
        }

        const value = tierValues[tier] * quantity;

        if (!oreTotals[ore]) oreTotals[ore] = 0;
        oreTotals[ore] += value;
        grandTotal += value;
      });

      for (const ore in oreTotals) {
        output += `${capitalize(ore)}: ${oreTotals[ore]} refined\n`;
      }

      output += `\nTotal Refined Material: ${grandTotal}`;
      document.getElementById("results").textContent = output;
    }

    function capitalize(word) {
      return word.charAt(0).toUpperCase() + word.slice(1);
    }
  </script>

</body>
</html>

